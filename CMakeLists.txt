cmake_minimum_required(VERSION 3.8)
project(ipc_direct)
if(COMMAND cmake_policy)
    cmake_policy(SET CMP0003 NEW)
endif(COMMAND cmake_policy)
add_library(ipc SHARED common/helper.c common/metaqueue.c lib/__deprecated_attachqueue_lib.c lib/setup_sock_lib.c lib/lib.c)
target_link_libraries(ipc dl)
target_link_libraries(ipc pthread)
add_executable(monitor common/helper.c common/metaqueue.c monitor/setup_sock_monitor.c monitor/process.c monitor/main.c)
target_link_libraries(monitor pthread)
add_executable(test_attach test/test_attach.c)
add_executable(test_attach_old test/test_attach_old.c)
target_link_libraries(test_attach ipc)
add_executable(test_metaqueue common/metaqueue.c common/helper.c test/test_metaqueue.c)
target_link_libraries(test_metaqueue pthread)